<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="阿里云部署Web项目流程"><meta name="keywords" content="部署"><meta name="author" content="Krab"><meta name="copyright" content="Krab"><title>阿里云部署Web项目流程 | Krab's Blog</title><link rel="shortcut icon" href="/krab-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.6.0/css/all.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '6.3.0'
} </script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Krab's Blog" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">下载安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JRE"><span class="toc-number">1.1.</span> <span class="toc-text">JRE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven"><span class="toc-number">1.2.</span> <span class="toc-text">Maven</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85%E5%B9%B6%E8%A7%A3%E5%8E%8B%E5%8D%B3%E5%8F%AF"><span class="toc-number">1.2.1.</span> <span class="toc-text">下载安装包并解压即可</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.2.</span> <span class="toc-text">配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F"><span class="toc-number">1.2.3.</span> <span class="toc-text">添加阿里云镜像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL"><span class="toc-number">1.3.</span> <span class="toc-text">MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8MySQL"><span class="toc-number">1.3.2.</span> <span class="toc-text">启动MySQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81%E5%B9%B6%E6%89%A7%E8%A1%8Csql%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.3.</span> <span class="toc-text">设置密码并执行sql导入数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis"><span class="toc-number">1.4.</span> <span class="toc-text">Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Redis"><span class="toc-number">1.4.1.</span> <span class="toc-text">安装Redis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8Redis"><span class="toc-number">1.4.2.</span> <span class="toc-text">启动Redis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.3.</span> <span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Kafka"><span class="toc-number">1.5.</span> <span class="toc-text">Kafka</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E8%A7%A3%E5%8E%8B"><span class="toc-number">1.5.1.</span> <span class="toc-text">下载解压</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.2.</span> <span class="toc-text">修改相关配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8kafka"><span class="toc-number">1.5.3.</span> <span class="toc-text">启动kafka</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-1"><span class="toc-number">1.5.4.</span> <span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Elastic"><span class="toc-number">1.6.</span> <span class="toc-text">Elastic</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDelasticsearch%E5%92%8C%E5%88%86%E8%AF%8D%E6%8F%92%E4%BB%B6%E5%B9%B6%E8%A7%A3%E5%8E%8B"><span class="toc-number">1.6.1.</span> <span class="toc-text">下载elasticsearch和分词插件并解压</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE-1"><span class="toc-number">1.6.2.</span> <span class="toc-text">修改相关配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#wkhtmltopdf"><span class="toc-number">1.7.</span> <span class="toc-text">wkhtmltopdf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-1"><span class="toc-number">1.7.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-2"><span class="toc-number">1.7.2.</span> <span class="toc-text">测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99shell%E6%96%B9%E4%BE%BF%E7%A8%8B%E5%BA%8F%E8%B0%83%E7%94%A8"><span class="toc-number">1.7.3.</span> <span class="toc-text">编写shell方便程序调用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tomcat"><span class="toc-number">1.8.</span> <span class="toc-text">tomcat</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E8%A7%A3%E5%8E%8B-1"><span class="toc-number">1.8.1.</span> <span class="toc-text">下载解压</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-1"><span class="toc-number">1.8.2.</span> <span class="toc-text">配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-3"><span class="toc-number">1.8.3.</span> <span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ngnix"><span class="toc-number">1.9.</span> <span class="toc-text">Ngnix</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-2"><span class="toc-number">1.9.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E4%BF%A1%E6%81%AF"><span class="toc-number">1.9.2.</span> <span class="toc-text">配置反向代理信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8nginx"><span class="toc-number">1.9.3.</span> <span class="toc-text">启动nginx</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.</span> <span class="toc-text">部署项目</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#git-clone-%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.1.</span> <span class="toc-text">git clone 项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.1.1.</span> <span class="toc-text">打包项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86war%E5%8C%85%E7%A7%BB%E5%8A%A8%E5%88%B0tomcat%E7%9A%84webapps%E7%9B%AE%E5%BD%95%E4%B8%8B"><span class="toc-number">2.1.2.</span> <span class="toc-text">将war包移动到tomcat的webapps目录下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8tomcat"><span class="toc-number">2.1.3.</span> <span class="toc-text">启动tomcat</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Bug%E6%8E%92%E6%9F%A5"><span class="toc-number">3.</span> <span class="toc-text">Bug排查</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8Btomcat%E7%9A%84log%E6%96%87%E4%BB%B6%E5%AE%9A%E4%BD%8D%E9%97%AE%E9%A2%98"><span class="toc-number">3.1.</span> <span class="toc-text">可以查看tomcat的log文件定位问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kafka%E9%97%AE%E9%A2%98%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8kafka%E5%8D%B3%E5%8F%AF"><span class="toc-number">3.2.</span> <span class="toc-text">kafka问题重新启动kafka即可</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://cdn.jsdelivr.net/gh/isxrh/My-Private-Pictures/img/krab.jpg"></div><div class="author-info__name text-center">Krab</div><div class="author-info__description text-center"></div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/isxrh">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">16</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">10</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">10</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/isxrh/My-Private-Pictures/img/Sea.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Krab's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">阿里云部署Web项目流程</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2024-04-28</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Web/">Web</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><blockquote>
<p>配置说明：</p>
<ul>
<li>阿里云ECS </li>
<li>2核4g </li>
<li>Centos 7.6</li>
</ul>
</blockquote>
<h1 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h1><h2 id="JRE"><a href="#JRE" class="headerlink" title="JRE"></a>JRE</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# yum list java*</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# yum install -y java-1.8.0-openjdk.x86_64</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# java -version</span><br><span class="line">openjdk version &quot;1.8.0_412&quot;</span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_412-b08)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.412-b08, mixed mode)</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# whereis java</span><br><span class="line">java: /usr/bin/java /usr/lib/java /etc/java /usr/share/java /usr/share/man/man1/java.1.gz</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# yum install -y java-1.8.0-openjdk-devel.x86_64</span><br></pre></td></tr></table></figure>

<h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><h3 id="下载安装包并解压即可"><a href="#下载安装包并解压即可" class="headerlink" title="下载安装包并解压即可"></a>下载安装包并解压即可</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# wget -i -c https://archive.apache.org/dist/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# tar -zvxf apache-maven-3.6.3-bin.tar.gz -C /opt</span><br></pre></td></tr></table></figure>
<h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# vim /etc/profile</span><br><span class="line">export PATH=$PATH:/opt/apache-maven-3.6.3/bin</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# source /etc/profile</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# echo $PATH</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/opt/apache-maven-3.6.3/bin</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# mvn -version</span><br><span class="line">Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)</span><br><span class="line">Maven home: /opt/apache-maven-3.6.3</span><br></pre></td></tr></table></figure>
<h3 id="添加阿里云镜像"><a href="#添加阿里云镜像" class="headerlink" title="添加阿里云镜像"></a>添加阿里云镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# cd /opt/apache-maven-3.6.3/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ apache-maven-3.6.3]# ll</span><br><span class="line">total 48</span><br><span class="line">drwxr-xr-x 2 root root  4096 Jul 20 13:12 bin</span><br><span class="line">drwxr-xr-x 2 root root  4096 Jul 20 13:12 boot</span><br><span class="line">drwxr-xr-x 3 root root  4096 Nov  7  2019 conf</span><br><span class="line">drwxr-xr-x 4 root root  4096 Jul 20 13:12 lib</span><br><span class="line">-rw-r--r-- 1 root root 17504 Nov  7  2019 LICENSE</span><br><span class="line">-rw-r--r-- 1 root root  5141 Nov  7  2019 NOTICE</span><br><span class="line">-rw-r--r-- 1 root root  2612 Nov  7  2019 README.txt</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ apache-maven-3.6.3]# cd conf</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ conf]# ls</span><br><span class="line">logging  settings.xml  toolchains.xml</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ conf]# vim settings.xml </span><br><span class="line">&lt;mirror&gt;</span><br><span class="line">  &lt;id&gt;aliyunmaven&lt;/id&gt;</span><br><span class="line">  &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">  &lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">  &lt;url&gt;https://maven.aliyun.com/repository/central&lt;/url&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure>

<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# wget -i -c https://dev.mysql.com/get/mysql84-community-release-el7-1.noarch.rpm</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# yum install -y mysql84-community-release-el7-1.noarch.rpm</span><br><span class="line">Complete!</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# cd /</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# yum list mysql*</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# yum install y mysql-community-server.x86_64</span><br><span class="line">Complete!</span><br></pre></td></tr></table></figure>
<h3 id="启动MySQL"><a href="#启动MySQL" class="headerlink" title="启动MySQL"></a>启动MySQL</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# systemctl start mysqld</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# systemctl status mysqld</span><br><span class="line">   mysqld.service - MySQL Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Sat 2024-07-20 17:38:30 CST; 3min 4s ago</span><br><span class="line">     Docs: man:mysqld(8)</span><br><span class="line">           http://dev.mysql.com/doc/refman/en/using-systemd.html</span><br><span class="line">  Process: 6591 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 6662 (mysqld)</span><br><span class="line">   Status: &quot;Server is operational&quot;</span><br><span class="line">    Tasks: 34</span><br><span class="line">   Memory: 475.5M</span><br><span class="line">   CGroup: /system.slice/mysqld.service</span><br><span class="line">               6662 /usr/sbin/mysqld</span><br><span class="line">Jul 20 17:38:21 iZ0jlhpjugbir19wvdv85dZ systemd[1]: Starting MySQL Server...</span><br><span class="line">Jul 20 17:38:30 iZ0jlhpjugbir19wvdv85dZ systemd[1]: Started MySQL Server.</span><br></pre></td></tr></table></figure>

<h3 id="设置密码并执行sql导入数据"><a href="#设置密码并执行sql导入数据" class="headerlink" title="设置密码并执行sql导入数据"></a>设置密码并执行sql导入数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# grep &#x27;password&#x27; /var/log/mysqld.log</span><br><span class="line">2024-07-20T09:38:26.107903Z 6 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: bRgy&lt;os30IlX</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# mysql -u root -p</span><br><span class="line">Enter password: 这里写新密码</span><br><span class="line">mysql&gt; alter user root@localhost identified by &#x27;root&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line">mysql&gt; exit</span><br><span class="line">Bye</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# unzip -d /home community-init-sql-1.5.zip </span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# mysql -u root -p</span><br><span class="line">Enter password: </span><br><span class="line">mysql&gt; create database community;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">mysql&gt; use community;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; source /home/community-init-sql-1.5/init_schema.sql</span><br><span class="line">mysql&gt; source /home/community-init-sql-1.5/init_data.sql</span><br><span class="line">mysql&gt; source /home/community-init-sql-1.5/tables_mysql_innodb.sql</span><br></pre></td></tr></table></figure>

<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><h3 id="安装Redis"><a href="#安装Redis" class="headerlink" title="安装Redis"></a>安装Redis</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# yum list redis*</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">Available Packages</span><br><span class="line">redis.x86_64                                                                                               3.2.12-2.el7                                                                                          epel</span><br><span class="line">redis-trib.noarch                                                                                          3.2.12-2.el7                                                                                          epel</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# yum install -y redis.x86_64</span><br><span class="line">Complete!</span><br></pre></td></tr></table></figure>

<h3 id="启动Redis"><a href="#启动Redis" class="headerlink" title="启动Redis"></a>启动Redis</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# systemctl start redis</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# systemctl status redis</span><br><span class="line">   redis.service - Redis persistent key-value database</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/redis.service; disabled; vendor preset: disabled)</span><br><span class="line">  Drop-In: /etc/systemd/system/redis.service.d</span><br><span class="line">               limit.conf</span><br><span class="line">   Active: active (running) since Sat 2024-07-20 18:15:34 CST; 14s ago</span><br><span class="line"> Main PID: 6953 (redis-server)</span><br><span class="line">    Tasks: 3</span><br><span class="line">   Memory: 4.2M</span><br><span class="line">   CGroup: /system.slice/redis.service</span><br><span class="line">               6953 /usr/bin/redis-server 127.0.0.1:6379</span><br><span class="line">Jul 20 18:15:34 iZ0jlhpjugbir19wvdv85dZ systemd[1]: Starting Redis persistent key-value database...</span><br><span class="line">Jul 20 18:15:34 iZ0jlhpjugbir19wvdv85dZ systemd[1]: Started Redis persistent key-value database.</span><br></pre></td></tr></table></figure>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# redis-cli</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">(empty list or set)</span><br><span class="line">127.0.0.1:6379&gt; exit</span><br></pre></td></tr></table></figure>

<h2 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h2><h3 id="下载解压"><a href="#下载解压" class="headerlink" title="下载解压"></a>下载解压</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# wget -i -c https://downloads.apache.org/kafka/3.7.1/kafka_2.12-3.7.1.tgz</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# tar -zvxf kafka_2.12-3.7.1.tgz -C /opt</span><br></pre></td></tr></table></figure>
<h3 id="修改相关配置"><a href="#修改相关配置" class="headerlink" title="修改相关配置"></a>修改相关配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# cd kafka_2.12-3.7.1/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ kafka_2.12-3.7.1]# cd config/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ config]# ls</span><br><span class="line">connect-console-sink.properties    connect-file-sink.properties    connect-mirror-maker.properties  kraft                server.properties       zookeeper.properties</span><br><span class="line">connect-console-source.properties  connect-file-source.properties  connect-standalone.properties    log4j.properties     tools-log4j.properties</span><br><span class="line">connect-distributed.properties     connect-log4j.properties        consumer.properties              producer.properties  trogdor.conf</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ config]# vim zookeeper.properties </span><br><span class="line">不需要修改</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ config]# vim server.properties</span><br><span class="line">不需要修改</span><br></pre></td></tr></table></figure>
<h3 id="启动kafka"><a href="#启动kafka" class="headerlink" title="启动kafka"></a>启动kafka</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ kafka_2.12-3.7.1]# bin/zookeeper-server-start.sh -daemon config/zookeeper.properties </span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ kafka_2.12-3.7.1]# nohup bin/kafka-server-start.sh config/server.properties  1&gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">[1] 7975</span><br></pre></td></tr></table></figure>
<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ kafka_2.12-3.7.1]# bin/kafka-topics.sh --list --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure>

<h2 id="Elastic"><a href="#Elastic" class="headerlink" title="Elastic"></a>Elastic</h2><h3 id="下载elasticsearch和分词插件并解压"><a href="#下载elasticsearch和分词插件并解压" class="headerlink" title="下载elasticsearch和分词插件并解压"></a>下载elasticsearch和分词插件并解压</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# wget -i -c https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.3.tar.gz</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# wget -i -c https://release.infinilabs.com/analysis-ik/stable/elasticsearch-analysis-ik-6.4.3.zip</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# tar -zvxf elasticsearch-6.4.3.tar.gz -C /opt</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# unzip -d /opt/elasticsearch-6.4.3/plugins/ik elasticsearch-analysis-ik-6.4.3.zip </span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# cd /opt/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# ll</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x 6 root root 4096 Jul 20 13:12 apache-maven-3.6.3</span><br><span class="line">drwx--x--x 4 root root 4096 Jul 19 01:24 containerd</span><br><span class="line">drwxr-xr-x 8 root root 4096 Oct 31  2018 elasticsearch-6.4.3</span><br><span class="line">drwxr-xr-x 8 root root 4096 Jul 20 20:34 kafka_2.12-3.7.1</span><br></pre></td></tr></table></figure>

<h3 id="修改相关配置-1"><a href="#修改相关配置-1" class="headerlink" title="修改相关配置"></a>修改相关配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# cd elasticsearch-6.4.3/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ elasticsearch-6.4.3]# cd config/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ config]# ll</span><br><span class="line">total 24</span><br><span class="line">-rw-rw---- 1 root root 2853 Oct 31  2018 elasticsearch.yml</span><br><span class="line">-rw-rw---- 1 root root 2937 Oct 31  2018 jvm.options</span><br><span class="line">-rw-rw---- 1 root root 6380 Oct 31  2018 log4j2.properties</span><br><span class="line">-rw-rw---- 1 root root  473 Oct 31  2018 role_mapping.yml</span><br><span class="line">-rw-rw---- 1 root root  197 Oct 31  2018 roles.yml</span><br><span class="line">-rw-rw---- 1 root root    0 Oct 31  2018 users</span><br><span class="line">-rw-rw---- 1 root root    0 Oct 31  2018 users_roles</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ config]# vim elasticsearch.yml </span><br><span class="line">这里主要修改两处：</span><br><span class="line">path.data: /tmp/elastic/data</span><br><span class="line">path.logs: /tmp/elastic/logs</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ config]# vim jvm.options </span><br><span class="line">这里主要修改两处：</span><br><span class="line">-Xms256m</span><br><span class="line">-Xmx512m</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ config]# groupadd nowcoder</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ config]# useradd nowcoder1 -p 123456 -g nowcoder</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ config]# cd /opt</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# chown -R nowcoder1:nowcoder *</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# cd /tmp</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ tmp]# chown -R nowcoder1:nowcoder *</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ tmp]# su - nowcoder1</span><br><span class="line">[nowcoder1@iZ0jlhpjugbir19wvdv85dZ ~]$ cd /opt/elasticsearch-6.4.3/</span><br><span class="line">[nowcoder1@iZ0jlhpjugbir19wvdv85dZ elasticsearch-6.4.3]$ bin/elasticsearch -d</span><br><span class="line">[nowcoder1@iZ0jlhpjugbir19wvdv85dZ elasticsearch-6.4.3]$ su - </span><br><span class="line">Password: </span><br><span class="line">Last login: Sat Jul 20 12:16:43 CST 2024 from 219.230.65.72 on pts/0</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# curl -C GET &quot;localhost:9200/_cat/health?v&quot;</span><br><span class="line">curl: option -C: expected a proper numerical parameter</span><br><span class="line">curl: try &#x27;curl --help&#x27; or &#x27;curl --manual&#x27; for more information</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# curl -X GET &quot;localhost:9200/_cat/health?v&quot;</span><br><span class="line">epoch      timestamp cluster  status node.total node.data shards pri relo init unassign pending_tasks max_task_wait_time active_shards_percent</span><br><span class="line">1721481039 21:10:39  nowcoder green           1         1      0   0    0    0        0             0                  -                100.0%</span><br></pre></td></tr></table></figure>

<h2 id="wkhtmltopdf"><a href="#wkhtmltopdf" class="headerlink" title="wkhtmltopdf"></a>wkhtmltopdf</h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# yum list wkhtmltopdf*</span><br><span class="line">Available Packages</span><br><span class="line">wkhtmltopdf.x86_64                                                                                            0.12.4-1.el7                                                                                       </span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# yum install -y wkhtmltopdf.x86_64</span><br><span class="line">Complete!</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# yum list *xvfb*</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">Available Packages</span><br><span class="line">python-xvfbwrapper.noarch                                                                                    0.2.4-2.el7                                                                                      epel   </span><br><span class="line">xorg-x11-server-Xvfb.x86_64                                                                                  1.20.4-29.el7_9                                                                                  updates</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# yum install -y xorg-x11-server-Xvfb.x86_64</span><br><span class="line">Complete!</span><br></pre></td></tr></table></figure>
<h3 id="测试-2"><a href="#测试-2" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# xvfb-run --server-args=&quot;-screen 0, 1024x768x24&quot; wkhtmltoimage https://www.baidu.com 1.png </span><br><span class="line">Done </span><br></pre></td></tr></table></figure>
<h3 id="编写shell方便程序调用"><a href="#编写shell方便程序调用" class="headerlink" title="编写shell方便程序调用"></a>编写shell方便程序调用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# cd /opt/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# vim wkhtmltoimage.sh</span><br><span class="line">xvfb-run --server-args=&quot;-screen 0, 1024x768x24&quot; wkhtmltoimage &quot;$@&quot;</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# ll</span><br><span class="line">total 20</span><br><span class="line">drwxr-xr-x 6 nowcoder1 nowcoder 4096 Jul 20 13:12 apache-maven-3.6.3</span><br><span class="line">drwx--x--x 4 nowcoder1 nowcoder 4096 Jul 19 01:24 containerd</span><br><span class="line">drwxr-xr-x 8 nowcoder1 nowcoder 4096 Oct 31  2018 elasticsearch-6.4.3</span><br><span class="line">drwxr-xr-x 8 nowcoder1 nowcoder 4096 Jul 20 20:34 kafka_2.12-3.7.1</span><br><span class="line">-rw-r--r-- 1 root      root       67 Jul 20 21:16 wkhtmltoimage.sh</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# chmod +x wkhtmltoimage.sh </span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# ll</span><br><span class="line">total 20</span><br><span class="line">drwxr-xr-x 6 nowcoder1 nowcoder 4096 Jul 20 13:12 apache-maven-3.6.3</span><br><span class="line">drwx--x--x 4 nowcoder1 nowcoder 4096 Jul 19 01:24 containerd</span><br><span class="line">drwxr-xr-x 8 nowcoder1 nowcoder 4096 Oct 31  2018 elasticsearch-6.4.3</span><br><span class="line">drwxr-xr-x 8 nowcoder1 nowcoder 4096 Jul 20 20:34 kafka_2.12-3.7.1</span><br><span class="line">-rwxr-xr-x 1 root      root       67 Jul 20 21:16 wkhtmltoimage.sh</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# cd /home/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# /opt/wkhtmltoimage.sh https://baidu.com 2.png</span><br><span class="line">Done       </span><br></pre></td></tr></table></figure>

<h2 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a>tomcat</h2><h3 id="下载解压-1"><a href="#下载解压-1" class="headerlink" title="下载解压"></a>下载解压</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# wget -i -c https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.91/bin/apache-tomcat-9.0.91.tar.gz</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# tar -zvxf apache-tomcat-9.0.91.tar.gz -C /opt</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# cd /opt</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# ls</span><br><span class="line">apache-maven-3.6.3  apache-tomcat-9.0.91  containerd  elasticsearch-6.4.3  kafka_2.12-3.7.1  wkhtmltoimage.sh</span><br></pre></td></tr></table></figure>

<h3 id="配置环境变量-1"><a href="#配置环境变量-1" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ opt]# cd apache-tomcat-9.0.91/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ apache-tomcat-9.0.91]# cd bin</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# pwd</span><br><span class="line">/opt/apache-tomcat-9.0.91/bin</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# vim /etc/profile</span><br><span class="line">export PATH=$PATH:/opt/apache-tomcat-9.0.91/bin</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# sourve /etc/profile</span><br><span class="line">-bash: sourve: command not found</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# source /etc/profile</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# echo $PATH</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/apache-maven-3.6.3/bin:/root/bin:/opt/apache-maven-3.6.3/bin:/opt/apache-tomcat-9.0.91/bin</span><br></pre></td></tr></table></figure>
<h3 id="测试-3"><a href="#测试-3" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# startup.sh</span><br><span class="line">Using CATALINA_BASE:   /opt/apache-tomcat-9.0.91</span><br><span class="line">Using CATALINA_HOME:   /opt/apache-tomcat-9.0.91</span><br><span class="line">Using CATALINA_TMPDIR: /opt/apache-tomcat-9.0.91/temp</span><br><span class="line">Using JRE_HOME:        /</span><br><span class="line">Using CLASSPATH:       /opt/apache-tomcat-9.0.91/bin/bootstrap.jar:/opt/apache-tomcat-9.0.91/bin/tomcat-juli.jar</span><br><span class="line">Using CATALINA_OPTS:   </span><br><span class="line">Tomcat started.</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ bin]# cd /opt/apache-tomcat-9.0.91/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ apache-tomcat-9.0.91]# ls</span><br><span class="line">bin  BUILDING.txt  conf  CONTRIBUTING.md  lib  LICENSE  logs  NOTICE  README.md  RELEASE-NOTES  RUNNING.txt  temp  webapps  work</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ apache-tomcat-9.0.91]# cd webapps</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ webapps]# ls</span><br><span class="line">docs  examples  host-manager  manager  ROOT</span><br><span class="line">(可以打开ip:8080测试)</span><br></pre></td></tr></table></figure>

<h2 id="Ngnix"><a href="#Ngnix" class="headerlink" title="Ngnix"></a>Ngnix</h2><h3 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# yum list nginx*</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# yum install -y nginx.x86_64</span><br><span class="line">Complete!</span><br></pre></td></tr></table></figure>

<h3 id="配置反向代理信息"><a href="#配置反向代理信息" class="headerlink" title="配置反向代理信息"></a>配置反向代理信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# vim /etc/nginx/nginx.conf</span><br><span class="line"># 添加以下内容</span><br><span class="line"># 反向代理</span><br><span class="line">upstream myserver &#123;</span><br><span class="line">        server 127.0.0.1:8080 max_fails=3 fail_timeout=30s; # 配置真实的服务器，max_fails=3：如果nginx向tomcat分发了三次请求都没有正确响应，则认为服务器挂了，把服务器移除；移除30s之后在访问一次，看看有没有复活</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">	      listen 80; # 监听80端口</span><br><span class="line">        server_name 120.55.53.217; # ip地址</span><br><span class="line">        location / &#123;</span><br><span class="line">                proxy_pass: http://myserver; # 如果有请求访问120.55.53.217的80端口，就把请求平均分发给myserver里的服务器</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="启动nginx"><a href="#启动nginx" class="headerlink" title="启动nginx"></a>启动nginx</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# systemctl start nginx</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ /]# systemctl status nginx</span><br><span class="line">   nginx.service - The nginx HTTP and reverse proxy server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/nginx.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Sat 2024-07-20 21:44:01 CST; 12s ago</span><br><span class="line">  Process: 9311 ExecStart=/usr/sbin/nginx (code=exited, status=0/SUCCESS)</span><br><span class="line">  Process: 9308 ExecStartPre=/usr/sbin/nginx -t (code=exited, status=0/SUCCESS)</span><br><span class="line">  Process: 9305 ExecStartPre=/usr/bin/rm -f /run/nginx.pid (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 9313 (nginx)</span><br><span class="line">    Tasks: 3</span><br><span class="line">   Memory: 2.0M</span><br><span class="line">   CGroup: /system.slice/nginx.service</span><br><span class="line">               9313 nginx: master process /usr/sbin/nginx</span><br><span class="line">               9314 nginx: worker process</span><br><span class="line">               9315 nginx: worker process</span><br><span class="line"></span><br><span class="line">Jul 20 21:44:01 iZ0jlhpjugbir19wvdv85dZ systemd[1]: Starting The nginx HTTP and reverse proxy server...</span><br><span class="line">Jul 20 21:44:01 iZ0jlhpjugbir19wvdv85dZ nginx[9308]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">Jul 20 21:44:01 iZ0jlhpjugbir19wvdv85dZ nginx[9308]: nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br><span class="line">Jul 20 21:44:01 iZ0jlhpjugbir19wvdv85dZ systemd[1]: Started The nginx HTTP and reverse proxy server.</span><br></pre></td></tr></table></figure>

<h1 id="部署项目"><a href="#部署项目" class="headerlink" title="部署项目"></a>部署项目</h1><h2 id="git-clone-项目"><a href="#git-clone-项目" class="headerlink" title="git clone 项目"></a>git clone 项目</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# cd /home</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# git clone https://github.com/isxrh/community.git</span><br><span class="line">Cloning into &#x27;community&#x27;...</span><br><span class="line">remote: Enumerating objects: 1160, done.</span><br><span class="line">remote: Counting objects: 100% (1160/1160), done.</span><br><span class="line">remote: Compressing objects: 100% (627/627), done.</span><br><span class="line">remote: Total 1160 (delta 590), reused 894 (delta 324), pack-reused 0</span><br><span class="line">Receiving objects: 100% (1160/1160), 284.33 KiB | 0 bytes/s, done.</span><br><span class="line">Resolving deltas: 100% (590/590), done.</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# ls</span><br><span class="line">apache-maven-3.6.3-bin.tar.gz  apache-tomcat-9.0.91.zip  community-init-sql-1.5      elasticsearch-6.4.3.tar.gz           kafka_2.12-3.7.1.tgz                        nowcoder1</span><br><span class="line">apache-tomcat-9.0.91.tar.gz    community                 community-init-sql-1.5.zip  elasticsearch-analysis-ik-6.4.3.zip  mysql84-community-release-el7-1.noarch.rpm</span><br></pre></td></tr></table></figure>
<h3 id="打包项目"><a href="#打包项目" class="headerlink" title="打包项目"></a>打包项目</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ home]# cd community</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ community]# mvn clean package -Dmaven.test.skip=true</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">...</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  9.155 s</span><br><span class="line">[INFO] Finished at: 2024-08-13T19:59:59+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<h3 id="将war包移动到tomcat的webapps目录下"><a href="#将war包移动到tomcat的webapps目录下" class="headerlink" title="将war包移动到tomcat的webapps目录下"></a>将war包移动到tomcat的webapps目录下</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ community]# cd target/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ target]# mv ROOT.war /opt/apache-tomcat-9.0.91/webapps/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ target]# rm -rf /opt/apache-tomcat-9.0.91/webapps/ROOT</span><br></pre></td></tr></table></figure>
<h3 id="启动tomcat"><a href="#启动tomcat" class="headerlink" title="启动tomcat"></a>启动tomcat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ target]# startup.sh</span><br><span class="line">Using CATALINA_BASE:   /opt/apache-tomcat-9.0.91</span><br><span class="line">Using CATALINA_HOME:   /opt/apache-tomcat-9.0.91</span><br><span class="line">Using CATALINA_TMPDIR: /opt/apache-tomcat-9.0.91/temp</span><br><span class="line">Using JRE_HOME:        /usr</span><br><span class="line">Using CLASSPATH:       /opt/apache-tomcat-9.0.91/bin/bootstrap.jar:/opt/apache-tomcat-9.0.91/bin/tomcat-juli.jar</span><br><span class="line">Using CATALINA_OPTS:   </span><br><span class="line">Tomcat started.</span><br></pre></td></tr></table></figure>

<h1 id="Bug排查"><a href="#Bug排查" class="headerlink" title="Bug排查"></a>Bug排查</h1><h2 id="可以查看tomcat的log文件定位问题"><a href="#可以查看tomcat的log文件定位问题" class="headerlink" title="可以查看tomcat的log文件定位问题"></a>可以查看tomcat的log文件定位问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ kafka_2.12-3.7.1]# cd /opt/apache-tomcat-9.0.91/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ apache-tomcat-9.0.91]# shutdown.sh</span><br><span class="line">Using CATALINA_BASE:   /opt/apache-tomcat-9.0.91</span><br><span class="line">Using CATALINA_HOME:   /opt/apache-tomcat-9.0.91</span><br><span class="line">Using CATALINA_TMPDIR: /opt/apache-tomcat-9.0.91/temp</span><br><span class="line">Using JRE_HOME:        /usr</span><br><span class="line">Using CLASSPATH:       /opt/apache-tomcat-9.0.91/bin/bootstrap.jar:/opt/apache-tomcat-9.0.91/bin/tomcat-juli.jar</span><br><span class="line">Using CATALINA_OPTS:   </span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ apache-tomcat-9.0.91]# ls logs/</span><br></pre></td></tr></table></figure>

<h2 id="kafka问题重新启动kafka即可"><a href="#kafka问题重新启动kafka即可" class="headerlink" title="kafka问题重新启动kafka即可"></a>kafka问题重新启动kafka即可</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ apache-tomcat-9.0.91]# cd ~</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ ~]# cd /opt/kafka_2.12-3.7.1/</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ kafka_2.12-3.7.1]# bin/kafka-topics.sh --list --bootstrap-server localhost:9092</span><br><span class="line">[2024-08-13 20:07:08,729] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Node may not be available. (org.apache.kafka.clients.NetworkClient)</span><br><span class="line">^C[root@iZ0jlhpjugbir19wvdv85dZ kafka_2.12-3.7.1]bin/kafka-server-stop.sh </span><br><span class="line">No kafka server to stop</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ kafka_2.12-3.7.1]# bin/zookeeper-server-start.sh -daemon config/zookeeper.properties </span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ kafka_2.12-3.7.1]# nohup bin/kafka-server-start.sh config/server.properties  1&gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">[1] 15208</span><br><span class="line">[root@iZ0jlhpjugbir19wvdv85dZ kafka_2.12-3.7.1]# bin/kafka-topics.sh --list --bootstrap-server localhost:9092</span><br><span class="line">__consumer_offsets</span><br><span class="line">comment</span><br><span class="line">delete</span><br><span class="line">follow</span><br><span class="line">like</span><br><span class="line">publish</span><br><span class="line">share</span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Krab</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://isxrh.github.io/2024/04/28/202404_阿里云部署Web项目流程/">https://isxrh.github.io/2024/04/28/202404_阿里云部署Web项目流程/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%83%A8%E7%BD%B2/">部署</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2024/11/11/202411_QThread/"><i class="fa fa-chevron-left">  </i><span>使用QThread分离耗时操作</span></a></div><div class="next-post pull-right"><a href="/2024/02/15/202402_MyBatis/"><span>Mybatis</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/isxrh/My-Private-Pictures/img/Sea.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2024 By Krab</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>